(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-356a0e92","chunk-1af2d4fc","chunk-20233e34"],{"15bf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery(t)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"联动级别"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择联动级别",dictCode:"rank"},model:{value:e.queryParam.rankName,callback:function(t){e.$set(e.queryParam,"rankName",t)},expression:"queryParam.rankName"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"所属单位",disabled:"queryParam.deptId==''?false:true"}},[a("a-select",{attrs:{placeholder:"请选择所属单位",disabled:void 0!=e.queryParam.deptId},model:{value:e.queryParam.unitId,callback:function(t){e.$set(e.queryParam,"unitId",t)},expression:"queryParam.unitId"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.department,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.departName||t.id}},[e._v("\n                 "+e._s(t.departName||t.id)+"\n              ")])])}))],2)],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"所属部门"}},[a("a-select",{attrs:{placeholder:"请选择所属部门",disabled:void 0!=e.queryParam.unitId},model:{value:e.queryParam.deptId,callback:function(t){e.$set(e.queryParam,"deptId",t)},expression:"queryParam.deptId"}},[a("a-select-option",{attrs:{value:void 0}},[e._v("请选择")]),e._l(e.companys,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:t.departName||t.id}},[e._v("\n                 "+e._s(t.departName||t.id)+"\n              ")])])}))],2)],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.setting}},[e._v("设置")]),a("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),a("div",[a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",scroll:{x:!0},bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"htmlSlot",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t)}})]}},{key:"imgSlot",fn:function(t){return[t?a("img",{staticStyle:{"max-width":"80px","font-size":"12px","font-style":"italic"},attrs:{src:e.getImgView(t),height:"25px",alt:""}}):a("span",{staticStyle:{"font-size":"12px","font-style":"italic"}},[e._v("无图片")])]}},{key:"fileSlot",fn:function(t){return[t?a("a-button",{attrs:{ghost:!0,type:"primary",icon:"download",size:"small"},on:{click:function(a){return e.downloadFile(t)}}},[e._v("\n          下载\n        ")]):a("span",{staticStyle:{"font-size":"12px","font-style":"italic"}},[e._v("无文件")])]}},{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleDetail(n)}}},[e._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(n.id)}}},[a("a",[e._v("删除")])])],1)}}])})],1),a("rank-linkage-modal",{ref:"modalForm",on:{ok:e.modalFormOk}})],1)},r=[],i=(a("6eb7"),a("ac0d")),l=a("b65a"),s=a("7bbf"),o=(a("89f2"),a("b775")),c={name:"RankLinkageList",mixins:[l["a"],i["b"]],components:{RankLinkageModal:s["default"]},data:function(){return{companys:[],department:[],description:"多级联动管理页面",columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"联动级别",align:"center",dataIndex:"rankName_dictText"},{title:"姓名",align:"center",dataIndex:"userName"},{title:"电话",align:"center",dataIndex:"phone"},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:147,scopedSlots:{customRender:"action"}}],url:{list:"/alarm/rankLinkage/list",delete:"/alarm/rankLinkage/delete",deleteBatch:"/alarm/rankLinkage/deleteBatch",exportXlsUrl:"/alarm/rankLinkage/exportXls",importExcelUrl:"alarm/rankLinkage/importExcel",selectDepart:"alarm/rankLinkage/selectDepart"},dictOptions:{},superFieldList:[]}},created:function(){var e=this;o["b"].get(this.url.selectDepart,{params:{type:"1"}}).then((function(t){e.companys=t.result})),o["b"].get(this.url.selectDepart,{params:{type:"2"}}).then((function(t){e.department=t.result})),this.getSuperFieldList()},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{initDictConfig:function(){},getSuperFieldList:function(){var e=[];e.push({type:"string",value:"rankName",text:"联动级别",dictCode:"rank"}),e.push({type:"popup",value:"userName",text:"姓名",popup:{code:"tj_user_report",field:"realname",orgFields:"realname",destFields:"user_name"}}),e.push({type:"string",value:"phone",text:"电话",dictCode:""}),this.superFieldList=e},setting:function(){this.$refs.modalForm.setArt(),this.$refs.modalForm.title="设置",this.$refs.modalForm.disableSubmit=!1}}},d=c,u=(a("192c6"),a("d84f"),a("2877")),p=Object(u["a"])(d,n,r,!1,null,"7522e538",null);t["default"]=p.exports},"192c6":function(e,t,a){"use strict";var n=a("d3e3"),r=a.n(n);r.a},"60ae":function(e,t,a){},"6b09":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{attrs:{disabled:e.formDisabled}},[a("a-form-model",{ref:"form",attrs:{slot:"detail",model:e.model,rules:e.validatorRules},slot:"detail"},[a("a-row",[0==e.seta?a("span",[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"联动级别",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"rankName"}},[a("j-dict-select-tag",{attrs:{type:"list",dictCode:"rank",placeholder:"请选择联动级别"},model:{value:e.model.rankName,callback:function(t){e.$set(e.model,"rankName",t)},expression:"model.rankName"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"userName"}},[a("j-popup",{attrs:{field:"userName","org-fields":"realname,id,phone,unit_affiliated,depart_ids","dest-fields":"userName,userId,phone,unitId,deptId",code:"tj_user_report",multi:!0},on:{input:e.popupCallback},model:{value:e.model.userName,callback:function(t){e.$set(e.model,"userName",t)},expression:"model.userName"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"电话",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"phone"}},[a("a-input",{attrs:{placeholder:"请输入电话"},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1)],1)],1):a("span",{staticClass:"interval"},[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"一级人员 ~ 二级人员时间间隔",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"apartOne"}},[a("j-dict-select-tag",{attrs:{type:"list",dictCode:"apart",placeholder:"请选择时间间隔"},model:{value:e.art.apartOne,callback:function(t){e.$set(e.art,"apartOne",t)},expression:"art.apartOne"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"二级人员 ~ 三级人员时间间隔",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"apartTwo"}},[a("j-dict-select-tag",{attrs:{type:"list",dictCode:"apart",placeholder:"请选择时间间隔"},model:{value:e.art.apartTwo,callback:function(t){e.$set(e.art,"apartTwo",t)},expression:"art.apartTwo"}})],1)],1)],1)])],1)],1)],1)},r=[],i=a("a34a"),l=a.n(i),s=a("0fea"),o=(a("ca00"),a("b775"));function c(e,t,a,n,r,i,l){try{var s=e[i](l),o=s.value}catch(c){return void a(c)}s.done?t(o):Promise.resolve(o).then(n,r)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function l(e){c(i,n,r,l,s,"next",e)}function s(e){c(i,n,r,l,s,"throw",e)}l(void 0)}))}}var u={name:"RankLinkageForm",components:{},props:{disabled:{type:Boolean,default:!1,required:!1}},data:function(){return{seta:0,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{add:"/alarm/rankLinkage/add",edit:"/alarm/rankLinkage/edit",queryById:"/alarm/rankLinkage/queryById",setArt:"/alarm/rankLinkage/setArt",setting:"/alarm/rankLinkage/setting"},art:{apartOne:null,apartTwo:null}}},computed:{formDisabled:function(){return this.disabled}},created:function(){this.modelDefault=JSON.parse(JSON.stringify(this.model))},methods:{editArt:function(){var e=this;Object(s["j"])(this.url.setArt,this.art).then((function(t){e.$emit("ok"),e.seta=1}))},add:function(){this.seta=0,this.edit(this.modelDefault)},edit:function(e){this.seta=0,this.model=Object.assign({},e),this.visible=!0},setArt:function(){var e=d(l.a.mark((function e(t){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.seta=1,a=this,e.next=4,o["b"].get(this.url.setting).then((function(e){a.art.apartOne=e.result.apartOne,a.art.apartTwo=e.result.apartTwo}));case 4:this.visible=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(a){t.confirmLoading=!0;var n="",r="";1==t.seta?(t.confirmLoading=!0,t.editArt()):(e.model.id?(n+=e.url.edit,r="put"):(n+=e.url.add,r="post"),Object(s["h"])(n,e.model,r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1})))}}))},popupCallback:function(e,t){this.model=Object.assign(this.model,t)}}},p=u,m=(a("7f66"),a("2877")),f=Object(m["a"])(p,n,r,!1,null,null,null);t["default"]=f.exports},"7bbf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":e.disableSubmit}},cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("rank-linkage-form",{ref:"realForm",attrs:{disabled:e.disableSubmit},on:{ok:e.submitCallback}})],1)},r=[],i=a("6b09"),l={name:"RankLinkageModal",components:{RankLinkageForm:i["default"]},data:function(){return{title:"",width:800,visible:!1,disableSubmit:!1}},methods:{add:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.realForm.add()}))},setArt:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.realForm.setArt(e)}))},edit:function(e){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.realForm.edit(e)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){this.$refs.realForm.submitForm()},submitCallback:function(){this.$emit("ok"),this.visible=!1},handleCancel:function(){this.close()}}},s=l,o=a("2877"),c=Object(o["a"])(s,n,r,!1,null,null,null);t["default"]=c.exports},"7f66":function(e,t,a){"use strict";var n=a("8146"),r=a.n(n);r.a},8146:function(e,t,a){},d3e3:function(e,t,a){},d84f:function(e,t,a){"use strict";var n=a("60ae"),r=a.n(n);r.a}}]);