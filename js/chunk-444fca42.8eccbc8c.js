(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-444fca42","chunk-2d0b25a8"],{"246f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-chart",{attrs:{forceFit:!0,height:350,data:t.data,scale:t.scale}},[a("v-tooltip",{attrs:{showTitle:!1,dataKey:"item*percent"}}),a("v-axis"),a("v-legend",{attrs:{dataKey:"item"}}),a("v-pie",{attrs:{position:"percent",color:"item",color:["item",t.yanse],vStyle:t.pieStyle,label:t.labelConfig}}),a("v-coord",{attrs:{type:"theta"}})],1)],1)},n=[],i=a("7104"),l=[{dataKey:"percent",min:0,formatter:".0%"}],o={name:"EquipDataStatisticsForm",props:{yanse:Array,datas:Array},data:function(){return{data:[],scale:l,pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{offset:-40,textStyle:{rotate:0,textAlign:"center",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)"}}]}},watch:{datas:function(t){var e=(new i.View).source(t);e.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),this.data=e.rows}},mounted:function(){}},r=o,u=a("2877"),c=Object(u["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports},59269:function(t,e,a){"use strict";var s=a("9fd2"),n=a.n(s);n.a},"9fd2":function(t,e,a){},ae1e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"search"},[a("a-row",[a("a-col",{attrs:{xs:12,sm:12,md:6,lg:5,xl:6}},[a("h3",[t._v("所属系统")]),a("a-select",{staticStyle:{width:"80%"},attrs:{"show-search":"",placeholder:"请选择所属系统","option-filter-prop":"children"},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},t._l(t.allSystemtype,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.id},on:{click:function(a){return t.changeSystem(e.id)}}},[t._v("\n              "+t._s(e.sysName)+"\n            ")])})),1)],1),a("a-col",{attrs:{xs:12,sm:12,md:6,lg:5,xl:6}},[a("h3",[t._v("所属单位")]),a("a-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择所属单位"},model:{value:t.selectDept,callback:function(e){t.selectDept=e},expression:"selectDept"}},t._l(t.allDept,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.id}},[a("span",{staticStyle:{display:"inline-block",width:"100%"},attrs:{title:e.departName||e.id}},[t._v("\n                   "+t._s(e.departName||e.id)+"\n                ")])])})),1)],1),a("a-col",{attrs:{xs:12,sm:12,md:12,lg:10,xl:8}},[a("h3",[t._v("统计时间")]),a("a-range-picker",{on:{change:t.changeTime},model:{value:t.selectTime,callback:function(e){t.selectTime=e},expression:"selectTime"}})],1),a("a-col",{attrs:{xs:12,sm:12,md:12,lg:3,xl:3}},[a("div",{staticClass:"but"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.Count()}}},[t._v("查询")]),a("a-button",{attrs:{type:"danger"},on:{click:t.reset}},[t._v("重置")])],1)])],1)],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("a-row",[a("a-col",{attrs:{xs:24,sm:24,md:22,lg:12,xl:12}},[a("div",{staticClass:"equip"},[a("a-row",[a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("设备总数")]),a("h3",[t._v(t._s(t.equipTotal))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("在线总数")]),a("h3",[t._v(t._s(t.equiponline))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("离线总数")]),a("h3",[t._v(t._s(t.equipoffline))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("未注册总数")]),a("h3",[t._v(t._s(t.equipunRegister))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("正常总数")]),a("h3",[t._v(t._s(t.equipnormal))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("故障总数")]),a("h3",[t._v(t._s(t.equipfault))])])],1)],1),a("div",[a("a-row",[a("a-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:8}},[a("piea",{attrs:{yanse:t.yanse1,datas:t.msg1}})],1),a("a-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:8}},[a("pieb",{attrs:{yanse:t.yanse1,datas:t.msg2}})],1),a("a-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:8}},[a("piec",{attrs:{yanse:t.yanse1,datas:t.msg3}})],1)],1)],1)]),a("a-col",{attrs:{xs:24,sm:24,md:22,lg:12,xl:12}},[a("div",{staticClass:"equip equip_a"},[a("a-row",[a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("监控点总数")]),a("h3",[t._v(t._s(t.pointCount))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("在线总数")]),a("h3",[t._v(t._s(t.onlinePoint))])]),a("a-col",{attrs:{xs:8,sm:6,md:6,lg:6,xl:4}},[a("h3",[t._v("离线总数")]),a("h3",[t._v(t._s(t.offlinePoint))])])],1)],1),a("div",[a("a-row",[a("a-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:8}},[a("pied",{attrs:{yanse:t.yanse1,datas:t.msg4}})],1)],1)],1)])],1)],1),a("div",[a("h1",[t._v("监控单位设备运行信息")]),a("a-row",[a("a-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:18}},[a("a-row",[a("a-col",{attrs:{xs:8,sm:12,md:18,lg:18,xl:19}}),a("a-col",{attrs:{xs:16,sm:12,md:6,lg:6,xl:5}},[a("div",{attrs:{id:"components-pagination-demo-mini"}},[a("a-pagination",{attrs:{defaultCurrent:1,defaultPageSize:9,size:"small",total:t.total},on:{change:function(e){return t.changePage()}},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}})],1)])],1),a("div",[a("v-chart",{attrs:{forceFit:!0,height:400,data:t.data}},[a("v-tooltip"),a("v-axis"),a("v-legend"),a("v-bar",{attrs:{position:"月份*月均降雨量",color:"name",color:["name",["#F2BD42","#EE752F"]],adjust:t.adjust}})],1)],1)],1),a("a-col",{attrs:{xs:24,sm:24,md:24,lg:20,xl:6}},[a("a-row",[a("a-col",{attrs:{xs:3,sm:3,md:3,lg:3,xl:3}}),a("a-col",{attrs:{xs:14,sm:14,md:14,lg:14,xl:14}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"请选择所属单位","option-filter-prop":"children"}},t._l(t.allDept,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.deptName},on:{click:function(a){return t.handleMethod(e.id)}}},[t._v("\n                  "+t._s(e.departName)+"\n                ")])})),1)],1),a("a-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.handlesearch()}}},[t._v("查询")])],1)],1),a("a-row",[a("a-col",{attrs:{xs:3,sm:3,md:3,lg:3,xl:3}}),a("a-col",{attrs:{xs:16,sm:16,md:16,lg:16,xl:16}},[a("pief",{attrs:{yanse:t.yanse1,datas:t.msg6}})],1)],1)],1)],1)],1)])},n=[],i=a("246f"),l=a("0fea");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r=a("7104"),u={name:"EquipDataStatisticsList",components:{piea:i["default"],pieb:i["default"],piec:i["default"],pied:i["default"],pief:i["default"]},data:function(){return{data:[],onlinePoint:"",offlinePoint:"",pointCount:"",adjust:[{type:"dodge",marginRatio:1/32}],allSystemtype:[],allDept:[],systemid:"",deptid:"",deptName:"",beginTime:"",byTime:"",equipTotal:"",equiponline:"",equipoffline:"",equipnormal:"",equipunRegister:"",equipfault:"",selectType:"请选择设备类型",selectDept:"请选择所属单位",selectTime:[],yanse1:["#F2BD42","#D95040","#EE752F"],msg1:[],msg2:[],msg3:[],msg4:[],msg6:[],pageNo:1,pageSize:6,total:null,url:{statisticsDataInfo:"/equipdata/equipDataStatistics/statisticsDataInfo/",showDataInFigure:"/equipdata/equipDataStatistics/showData",getAllDept:"/baseMethod/equipment/selectDepart",getAllSystemType:"/equipdata/equipDataStatistics/getAllSystemType",showDataInCount:"/equipdata/equipDataStatistics/showDataInCount",showDataByDept:"/equipdata/equipDataStatistics/showDataByDept"}}},methods:{changeSystem:function(t){this.systemid=t},handleMethod:function(t){this.deptid=t},changeTime:function(t,e){this.beginTime=e[0],this.byTime=e[1]},statisticsData:function(){var t=new Date,e="-",a=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();s>=1&&s<=9&&(s="0"+s),n>=0&&n<=9&&(n="0"+n);var i=a+e+s+e+n;Object(l["i"])(this.url.statisticsDataInfo+"".concat(i),{day:i}).then((function(t){})).catch((function(t){}))},SystemType:function(){var t=this;Object(l["c"])(this.url.getAllSystemType).then((function(e){t.allSystemtype=e.result.list}))},Dept:function(){var t=this;Object(l["c"])(this.url.getAllDept).then((function(e){for(var a=0;a<e.result.length;a++)t.allDept.push(e.result[a]);for(var s=[],n=[],i=0;i<t.allDept.length;i++)s[i]=t.allDept[i].id,n[i]=t.allDept[i].deptName;var l=Math.floor(Math.random()*s.length);t.deptid=s[l],t.deptName=n[l]}))},Count:function(){var t=this,e={systemId:this.systemid,deptId:this.deptid,start:this.beginTime,end:this.byTime};Object(l["i"])(this.url.showDataInCount,e).then((function(e){t.equipTotal=e.result.TotalCount,t.equiponline=e.result.onlineCount,t.equipoffline=e.result.offlineCount,t.equipnormal=e.result.normalCount,t.equipunRegister=e.result.unRegisterCount,t.equipfault=e.result.faultCount,t.onlinePoint=e.result.onlinePoint,t.offlinePoint=e.result.offlinePoint,t.pointCount=e.result.pointCount,t.msg1=[{item:"在线",count:e.result.onlineCount},{item:"离线",count:e.result.offlineCount},{item:"未注册",count:e.result.unRegisterCount}],t.msg2=[{item:"在线",count:e.result.onlineCount},{item:"离线",count:e.result.offlineCount}],t.msg3=[{item:"正常",count:e.result.normalCount},{item:"故障",count:e.result.faultCount}],t.msg4=[{item:"在线",count:e.result.onlinePoint},{item:"离线",count:e.result.offlinePoint}]}))},changePage:function(){var t=this,e=[],a=[],s=[],n=0;e=Object.assign({},e,{name:"在线"}),a=Object.assign({},a,{name:"离线"}),Object(l["c"])(this.url.showDataInFigure,{pageNo:this.pageNo,pageSize:this.pageSize}).then((function(i){t.total=i.result.total,i.result.records.forEach((function(t){e=Object.assign({},e,o({},t.deptName,t.onlineNum)),a=Object.assign({},a,o({},t.deptName,t.offlineNum)),s[n]=t.deptName,n++}));var l=[];l[0]=e,l[1]=a;var u=(new r.View).source(l);u.transform({type:"fold",fields:s,key:"月份",value:"月均降雨量"}),t.data=u.rows}))},handlesearch:function(){var t=this;Object(l["i"])("/equipdata/equipDataStatistics/showDataByDept/".concat(this.deptid),{deptId:this.deptid}).then((function(e){t.msg6=[{item:"在线",count:e.result.dataStatistics.onlineNum},{item:"离线",count:e.result.dataStatistics.offlineNum}]}))},reset:function(){var t=this;this.selectType="请选择设备类型",this.selectDept="请选择所属单位",this.selectTime="";var e={systemId:"",deptId:"",start:"",end:""};Object(l["i"])(this.url.showDataInCount,e).then((function(e){t.equipTotal=e.result.TotalCount,t.equiponline=e.result.onlineCount,t.equipoffline=e.result.offlineCount,t.equipnormal=e.result.normalCount,t.equipunRegister=e.result.unRegisterCount,t.equipfault=e.result.faultCount,t.onlinePoint=e.result.onlinePoint,t.offlinePoint=e.result.offlinePoint,t.pointCount=e.result.pointCount,t.msg1=[{item:"在线",count:e.result.onlineCount},{item:"离线",count:e.result.offlineCount},{item:"未注册",count:e.result.unRegisterCount}],t.msg2=[{item:"在线",count:e.result.onlineCount},{item:"离线",count:e.result.offlineCount}],t.msg3=[{item:"正常",count:e.result.normalCount},{item:"故障",count:e.result.faultCount}],t.msg4=[{item:"在线",count:e.result.onlinePoint},{item:"离线",count:e.result.offlinePoint}]}))}},mounted:function(){this.changePage()},created:function(){this.statisticsData(),this.SystemType(),this.Dept(),this.Count()}},c=u,m=(a("59269"),a("2877")),p=Object(m["a"])(c,s,n,!1,null,"608e1ad6",null);e["default"]=p.exports}}]);