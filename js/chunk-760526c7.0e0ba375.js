(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-760526c7","chunk-760526c7"],{1244:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-input-demo-presuffix"},[a("a-input",{attrs:{placeholder:"请点击选择单位",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.textVals,callback:function(t){e.textVals=t},expression:"textVals"}},[a("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"单位选择控件"},slot:"prefix"}),e.storeVals?a("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),a("j-select-unit-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.value,store:e.storeField,text:e.textField,treeOpera:e.treeOpera},on:{ok:e.handleOK,initComp:e.initComp}})],1)},l=[],i=a("84ce7"),n=a("a9c5");function o(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,i=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d={name:"JSelectUnit",components:{JSelectUnitModal:i["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:""},backDepart:{type:Boolean,default:!1,required:!1},store:{type:String,default:"id",required:!1},text:{type:String,default:"departName",required:!1},treeOpera:{type:Boolean,default:!1,required:!1}},data:function(){return{visible:!1,confirmLoading:!1,storeVals:"",textVals:""}},computed:{storeField:function(){var e=this.customReturnField;return e||(e=this.store),Object(n["c"])(e)},textField:function(){return Object(n["c"])(this.text)}},mounted:function(){this.storeVals=this.value},watch:{value:function(e){this.storeVals=e}},methods:{initComp:function(e){this.textVals=e},backDeparInfo:function(){if(!0===this.backDepart&&this.storeVals&&this.storeVals.length>0){for(var e=this.storeVals.split(","),t=this.textVals.split(","),a=[],r=0;r<e.length;r++)a.push({value:e[r],text:t[r]});this.$emit("back",a)}},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e){if(!e&&e.length<=0)this.textVals="",this.storeVals="";else{var t,a=[],r=[],l=o(e);try{for(l.s();!(t=l.n()).done;){var i=t.value;a.push(i[this.storeField]),r.push(i[this.textField])}}catch(n){l.e(n)}finally{l.f()}this.storeVals=a.join(","),this.textVals=r.join(",")}this.$emit("change",this.storeVals),this.backDeparInfo()},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},u=d,p=(a("5f8d"),a("2877")),h=Object(p["a"])(u,r,l,!1,null,"36cdb92a",null);t["default"]=h.exports},"141e":function(e,t,a){"use strict";var r=a("9e2f"),l=a.n(r);l.a},"3ba0":function(e,t,a){"use strict";var r=a("e51d"),l=a.n(r);l.a},"418f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticStyle:{height:"100%",overflow:"auto","padding-bottom":"53px"},attrs:{title:e.title,maskClosable:!0,width:e.drawerWidth,closable:!0,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("template",{slot:"title"},[a("div",{staticStyle:{width:"100%"}},[a("span",[e._v(e._s(e.title))]),a("span",{staticStyle:{display:"inline-block",width:"calc(100% - 51px)","padding-right":"10px","text-align":"right"}},[a("a-button",{staticStyle:{height:"20px",width:"20px",border:"0px"},attrs:{icon:"appstore"},on:{click:e.toggleScreen}})],1)])]),a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form-model",{ref:"form",attrs:{model:e.model,rules:e.validatorRules}},[a("a-form-model-item",{attrs:{label:"用户账号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"username"}},[a("a-input",{attrs:{disabled:e.isSelect,placeholder:"请输入用户账号",readOnly:!!e.model.id},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),e.model.id?e._e():[a("a-form-model-item",{attrs:{label:"登录密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"password"}},[a("a-input",{attrs:{type:"password",placeholder:"请输入登录密码"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),a("a-form-model-item",{attrs:{label:"确认密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"confirmpassword"}},[a("a-input",{attrs:{type:"password",placeholder:"请重新输入登录密码"},on:{blur:e.handleConfirmBlur},model:{value:e.model.confirmpassword,callback:function(t){e.$set(e.model,"confirmpassword",t)},expression:"model.confirmpassword"}})],1)],a("a-form-model-item",{attrs:{label:"用户姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"realname"}},[a("a-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.model.realname,callback:function(t){e.$set(e.model,"realname",t)},expression:"model.realname"}})],1),a("a-form-model-item",{attrs:{label:"工号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"workNo"}},[a("a-input",{attrs:{disabled:e.isSelect,placeholder:"请输入工号"},model:{value:e.model.workNo,callback:function(t){e.$set(e.model,"workNo",t)},expression:"model.workNo"}})],1),a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!e.roleDisabled,expression:"!roleDisabled"}],attrs:{label:"角色分配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("j-multi-select-tag",{attrs:{disabled:e.isSelect,options:e.rolesOptions,placeholder:"请选择角色"},model:{value:e.model.selectedroles,callback:function(t){e.$set(e.model,"selectedroles",t)},expression:"model.selectedroles"}})],1),a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!e.departDisabled,expression:"!departDisabled"}],attrs:{label:"部门分配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("j-select-depart",{attrs:{multi:!0,backDepart:!0,treeOpera:!0},on:{back:e.backDepartInfo},model:{value:e.model.selecteddeparts,callback:function(t){e.$set(e.model,"selecteddeparts",t)},expression:"model.selecteddeparts"}},[e._v(">")])],1),a("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!e.departDisabled,expression:"!departDisabled"}],attrs:{disabled:e.isSelect,label:"单位分配",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("j-select-unit",{attrs:{disabled:e.isSelect,multi:!0,backDepart:!0,treeOpera:!0},on:{back:e.backUnitInfo},model:{value:e.model.selectedunit,callback:function(t){e.$set(e.model,"selectedunit",t)},expression:"model.selectedunit"}},[e._v(">")])],1),a("a-form-model-item",{attrs:{label:"头像",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("j-image-upload",{staticClass:"avatar-uploader",attrs:{text:"上传"},model:{value:e.model.avatar,callback:function(t){e.$set(e.model,"avatar",t)},expression:"model.avatar"}})],1),a("a-form-model-item",{attrs:{label:"生日",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择生日",format:e.dateFormat,getCalendarContainer:function(e){return e.parentNode}},model:{value:e.model.birthday,callback:function(t){e.$set(e.model,"birthday",t)},expression:"model.birthday"}})],1),a("a-form-model-item",{attrs:{label:"性别",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{attrs:{placeholder:"请选择性别",getPopupContainer:function(e){return e.parentNode}},model:{value:e.model.sex,callback:function(t){e.$set(e.model,"sex",t)},expression:"model.sex"}},[a("a-select-option",{attrs:{value:1}},[e._v("男")]),a("a-select-option",{attrs:{value:2}},[e._v("女")])],1)],1),a("a-form-model-item",{attrs:{label:"邮箱",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"email"}},[a("a-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),a("a-form-model-item",{attrs:{label:"手机号码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"phone"}},[a("a-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),a("a-form-model-item",{attrs:{label:"微信号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"wechat"}},[a("a-input",{attrs:{placeholder:"请输入微信号"},model:{value:e.model.wechat,callback:function(t){e.$set(e.model,"wechat",t)},expression:"model.wechat"}})],1),a("a-form-model-item",{attrs:{label:"QQ号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"qq"}},[a("a-input",{attrs:{placeholder:"请输入QQ号"},model:{value:e.model.qq,callback:function(t){e.$set(e.model,"qq",t)},expression:"model.qq"}})],1),a("a-form-model-item",{attrs:{label:"登录期限",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isSelect,placeholder:"请选择登录期限",format:e.dateFormat,getCalendarContainer:function(e){return e.parentNode}},model:{value:e.model.loginValidityPeriod,callback:function(t){e.$set(e.model,"loginValidityPeriod",t)},expression:"model.loginValidityPeriod"}})],1)],2)],1)],2)},l=[],i=a("c1df"),n=a.n(i),o=a("2b0e"),s=a("9fb0"),c=a("0fea"),d=a("4ec3"),u=a("c82c"),p=a("1244"),h={name:"UserModal",components:{JSelectUnit:p["default"]},data:function(){return{departDisabled:!1,roleDisabled:!1,modalWidth:800,drawerWidth:700,modaltoggleFlag:!0,confirmDirty:!1,userId:"",disableSubmit:!1,dateFormat:"YYYY-MM-DD",validatorRules:{username:[{required:!0,message:"请输入用户账号!"},{validator:this.validateUsername}],password:[{required:!0,pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,./]).{8,}$/,message:"密码由8位数字、大小写字母和特殊符号组成!"},{validator:this.validateToNextPassword,trigger:"change"}],confirmpassword:[{required:!0,message:"请重新输入登录密码!"},{validator:this.compareToFirstPassword}],realname:[{required:!0,message:"请输入用户名称!"}],phone:[{required:!0,message:"请输入手机号!"},{validator:this.validatePhone}],email:[{validator:this.validateEmail}],roles:{},workNo:[{required:!0,message:"请输入工号"},{validator:this.validateWorkNo}],telephone:[{pattern:/^0\d{2,3}-[1-9]\d{6,7}$/,message:"请输入正确的座机号码"}]},title:"操作",visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},uploadLoading:!1,confirmLoading:!1,headers:{},url:{fileUpload:window._CONFIG["domianURL"]+"/sys/common/upload",userWithDepart:"/sys/user/userDepartList",userId:"/sys/user/generateUserId",syncUserByUserName:"/act/process/extActProcess/doSyncUserByUserName",queryTenantList:"/sys/tenant/queryList"},rolesOptions:[],isSelect:!1}},created:function(){var e=o["default"].ls.get(s["a"]);this.headers={"X-Access-Token":e},this.initRoleList()},computed:{uploadAction:function(){return this.url.fileUpload}},methods:{add:function(){this.refresh(),this.edit({activitiSync:"1",userIdentity:1})},edit:function(e){var t=JSON.parse(localStorage.getItem("pro__Login_Userinfo"));2==e.userIdentity&&t.value.username==e.username&&"e9ca23d68d884d4ebb19d07889727dae"!=t.value.id?(this.isSelect=!0,this.initRoleList(2)):(this.isSelect=!1,this.initRoleList());var a=this;a.visible=!0,this.resetScreenSize(),a.userId=e.id,a.model=Object.assign({},{selectedroles:"",selecteddeparts:""},e),e.hasOwnProperty("id")&&(a.getUserRoles(e.id),a.getUserDeparts(e.id),a.getUserUnit(e.id))},isDisabledAuth:function(e){return Object(u["a"])(e)},toggleScreen:function(){this.modaltoggleFlag?this.modalWidth=window.innerWidth:this.modalWidth=800,this.modaltoggleFlag=!this.modaltoggleFlag},resetScreenSize:function(){var e=document.body.clientWidth;this.drawerWidth=e<500?e:700},initRoleList:function(e){var t=this;Object(d["R"])().then((function(a){if(a.success){if(2!=e){var r=JSON.parse(localStorage.getItem("pro__Login_Userinfo"));a.result=a.result.filter((function(e){if(r.value.username==e.createBy||r.value.username==e.updateBy)return e}))}t.rolesOptions=a.result.map((function(e,t,a){var r={label:e.roleName,value:e.id};return r}))}}))},getUserRoles:function(e){var t=this;Object(d["Q"])({userid:e}).then((function(e){e.success&&(t.model.selectedroles=e.result.join(","))}))},getUserDeparts:function(e){var t=this;Object(c["c"])(t.url.userWithDepart,{userId:e}).then((function(e){if(e.success){for(var a=[],r=0;r<e.result.length;r++)a.push(e.result[r].key);t.model.selecteddeparts=a.join(",")}}))},getUserUnit:function(e){var t=this;t.model.selectedunit=this.model.unitAffiliated,t.nextDepartOptions=departOptions},backDepartInfo:function(e){this.model.departIds=this.model.selecteddeparts,this.nextDepartOptions=e.map((function(e,t,a){var r={label:e.text,value:e.value+""};return r}))},backUnitInfo:function(e){this.model.unitAffiliated=this.model.selectedunit,this.nextDepartOptions=e.map((function(e,t,a){var r={label:e.text,value:e.value+""};return r}))},refresh:function(){this.userId=""},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1,this.$refs.form.resetFields()},moment:n.a,handleSubmit:function(){var e=this,t=this;this.$refs.form.validate((function(a){if(!a)return!1;var r;t.confirmLoading=!0,2!==e.model.userIdentity&&(e.model.departIds=""),e.model.id?r=Object(d["r"])(e.model):(e.model.id=e.userId,r=Object(d["e"])(e.model)),r.then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},validateToNextPassword:function(e,t,a){var r=this.model.confirmpassword;t&&r&&t!==r&&a("两次输入的密码不一样！"),t&&this.confirmDirty&&this.$refs.form.validateField(["confirmpassword"]),a()},compareToFirstPassword:function(e,t,a){t&&t!==this.model.password?a("两次输入的密码不一样！"):a()},validatePhone:function(e,t,a){if(t)if(new RegExp(/^1[3|4|5|7|8|9][0-9]\d{8}$/).test(t)){var r={tableName:"sys_user",fieldName:"phone",fieldVal:t,dataId:this.userId};Object(d["m"])(r).then((function(e){e.success?a():a("手机号已存在!")}))}else a("请输入正确格式的手机号码!");else a()},validateEmail:function(e,t,a){if(t)if(new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)){var r={tableName:"sys_user",fieldName:"email",fieldVal:t,dataId:this.userId};Object(d["m"])(r).then((function(e){e.success?a():a("邮箱已存在!")}))}else a("请输入正确格式的邮箱!");else a()},validateUsername:function(e,t,a){var r={tableName:"sys_user",fieldName:"username",fieldVal:t,dataId:this.userId};Object(d["m"])(r).then((function(e){e.success?a():a("用户名已存在!")}))},validateWorkNo:function(e,t,a){var r={tableName:"sys_user",fieldName:"work_no",fieldVal:t,dataId:this.userId};Object(d["m"])(r).then((function(e){e.success?a():a("工号已存在!")}))},handleConfirmBlur:function(e){var t=e.target.value;this.confirmDirty=this.confirmDirty||!!t},beforeUpload:function(e){var t=e.type;if(t.indexOf("image")<0)return this.$message.warning("请上传图片"),!1}}},m=h,f=(a("141e"),a("2877")),b=Object(f["a"])(m,r,l,!1,null,"16a7d72a",null);t["default"]=b.exports},"5f8d":function(e,t,a){"use strict";var r=a("fc5b"),l=a.n(r);l.a},"84ce7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:"选择单位",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,wrapClassName:"j-depart-select-modal",switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel,"update:fullscreen":e.isFullscreen}},[a("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[a("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入单位名称按回车进行搜索"},on:{search:e.onSearch}}),a("a-tree",{class:e.treeScreenClass,attrs:{checkable:"",treeData:e.treeData,checkStrictly:e.checkStrictly,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(t){var r=t.title;return[r.indexOf(e.searchValue)>-1?a("span",[e._v("\n          "+e._s(r.substr(0,r.indexOf(e.searchValue)))+"\n          "),a("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(r.substr(r.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):a("span",[e._v(e._s(r))])]}}])})],1),e.treeOpera&&e.multi?a("template",{slot:"footer"},[a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:function(t){return e.switchCheckStrictly(1)}}},[e._v("父子关联")]),a("a-menu-item",{key:"2",on:{click:function(t){return e.switchCheckStrictly(2)}}},[e._v("取消关联")])],1),a("a-button",[e._v("\n          树操作 "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-button",{staticStyle:{"margin-right":"0.8rem"},attrs:{type:"primary"},on:{click:e.handleCancel}},[e._v("关闭")]),a("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确认")])],1)]):e._e()],2)},l=[],i=a("4ec3");function n(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){o=!0,i=e},f:function(){try{n||null==a.return||a.return()}finally{if(o)throw i}}}}function o(e){return u(e)||d(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var h={name:"JSelectUnitModal",props:["modalWidth","multi","rootOpened","departId","store","text","treeOpera"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:"",checkStrictly:!0,fullscreen:!1}},created:function(){this.loadDepart()},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.initDepartComponent(!0)}}},computed:{treeScreenClass:function(){return{"my-dept-select-tree":!0,fullscreen:this.fullscreen}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},loadDepart:function(){var e=this;Object(i["O"])().then((function(t){if(t.success){var a=o(t.result);e.reWriterWithSlot(a),e.treeData=a,e.initDepartComponent(),e.rootOpened&&e.initExpandedKeys(t.result)}}))},initDepartComponent:function(e){var t=[],a=1==e?"key":this.text;if(this.departId){var r,l=this.departId.split(","),i=n(this.dataList);try{for(i.s();!(r=i.n()).done;){var o=r.value;l.indexOf(o[this.store])>=0&&t.push(o[a])}}catch(s){i.e(s)}finally{i.f()}}1==e?this.checkedKeys=[].concat(t):this.$emit("initComp",t.join(","))},reWriterWithSlot:function(e){var t,a=n(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.children&&r.children.length>0){this.reWriterWithSlot(r.children);var l=Object.assign({},r);l.children={},this.dataList.push(l)}else this.dataList.push(r),r.scopedSlots={title:"title"}}}catch(i){a.e(i)}finally{a.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,a=[],r=n(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;l.children&&l.children.length>0&&a.push(l.id)}}catch(i){r.e(i)}finally{r.f()}this.expandedKeys=[].concat(a)}else this.expandedKeys=[]},onCheck:function(e,t){var a=this;if(this.multi)this.checkStrictly?this.checkedKeys=e.checked:this.checkedKeys=e,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var r=e.checked.filter((function(e){return a.checkedKeys.indexOf(e)<0}));this.checkedKeys=o(r),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){if(this.checkStrictly){var a=[];if(a.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var r,l=t.node.dataRef.key;if(this.checkedKeys.indexOf(l)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==l}));else(r=this.checkedKeys).push.apply(r,a)}else this.checkedKeys=[].concat(a),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)}},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){if(this.checkedKeys&&0!=this.checkedKeys.length){var e=this.getCheckedRows(this.checkedKeys),t=this.checkedKeys.join(",");this.$emit("ok",e,t)}else this.$emit("ok","");this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var a,r=0;r<t.length;r++){var l=t[r];l.children&&(l.children.some((function(t){return t.key===e}))?a=l.key:this.getParentKey(e,l.children)&&(a=this.getParentKey(e,l.children)))}return a},onSearch:function(e){var t=this,a=this.dataList.map((function(a){return a.title.indexOf(e)>-1?t.getParentKey(a.key,t.treeData):null})).filter((function(e,t,a){return e&&a.indexOf(e)===t}));Object.assign(this,{expandedKeys:a,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,a=function e(t,a){var r,l=n(t);try{for(l.s();!(r=l.n()).done;){var i=r.value;if(i.id===a)return i;if(i.children instanceof Array){var o=e(i.children,a);if(null!=o)return o}}}catch(s){l.e(s)}finally{l.f()}return null},r=[],l=n(e);try{for(l.s();!(t=l.n()).done;){var i=t.value,o=a(this.treeData,i);null!=o&&r.push(o)}}catch(s){l.e(s)}finally{l.f()}return r},switchCheckStrictly:function(e){1==e?this.checkStrictly=!1:2==e&&(this.checkStrictly=!0)},isFullscreen:function(e){this.fullscreen=e}}},m=h,f=(a("3ba0"),a("2877")),b=Object(f["a"])(m,r,l,!1,null,"15720c8f",null);t["default"]=b.exports},"9e2f":function(e,t,a){},e51d:function(e,t,a){},fc5b:function(e,t,a){}}]);