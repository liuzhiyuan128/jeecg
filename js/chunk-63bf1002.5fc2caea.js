(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63bf1002","chunk-29e48575","chunk-e593b4b0","chunk-2d0e9d63","chunk-2d0abcbb"],{1798:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("j-modal",{attrs:{title:t.title,width:t.width,visible:t.visible,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":t.disableSubmit}},cancelText:"关闭"},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("ToConfigureList",{ref:"realForm",attrs:{disabled:t.disableSubmit},on:{ok:t.submitCallback}})],1)},n=[],r=a("6455"),l={name:"ToConfigureModal",components:{ToConfigureList:r["default"]},data:function(){return{title:"",width:1e3,visible:!1,disableSubmit:!1}},methods:{add:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.realForm.add()}))},edit:function(t){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.realForm.edit(t.id)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){this.$refs.realForm.submitForm()},submitCallback:function(){this.$emit("ok"),this.visible=!1},handleCancel:function(){this.close()}}},o=l,s=a("2877"),c=Object(s["a"])(o,i,n,!1,null,null,null);e["default"]=c.exports},"3d2d":function(t,e,a){"use strict";var i=a("bb1b"),n=a.n(i);n.a},5914:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"euqipment-chart-right",staticStyle:{height:"160px","margin-bottom":"20px"}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("v-chart",{staticClass:"chart",attrs:{forceFit:!0,height:t.height,data:t.data,scale:t.scale}},[a("v-tooltip",{attrs:{showTitle:!1,dataKey:"item*percent"}}),a("v-axis"),a("v-pie",{attrs:{position:"percent",color:"item",vStyle:t.pieStyle,label:t.labelConfig}}),a("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-row",{staticClass:"data"},[a("a-col",{attrs:{span:8}},[a("h1",[t._v("设备总数 "),a("br"),t._v(" "+t._s(this.totalNum))])]),a("a-col",{attrs:{span:16}},[a("ul",[a("li",{staticClass:"data-on"},[t._v("正常　"+t._s(this.data[0].count))]),a("li",{staticClass:"data-up"},[t._v("故障　"+t._s(this.data[1].count))])])])],1)],1)],1)],1)},n=[],r=a("b775"),l=a("7104"),o=[{item:"正常",count:1},{item:"故障",count:1}],s=[{dataKey:"percent",min:0,formatter:".0%"}],c=(new l.View).source(o);c.transform({type:"percent",field:"count",dimension:"item",as:"percent"});var u=c.rows,d={name:"EquipmentChartRight",data:function(){return{totalNum:"",data:u,scale:s,height:250,pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{formatter:function(t,e){return e.point.item+": "+t}}]}},created:function(){var t=this;r["b"].get(window._CONFIG["domianURL"]+"/equipment/equipmentTable/selectEquipmentNumber").then((function(e){var a=[{item:"正常",count:1},{item:"故障",count:1}];a[0].count=e.result.normalNum,a[1].count=e.result.faultNum,t.totalNum=e.result.totalNum;var i=(new l.View).source(a);i.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),t.data=i.rows}))}},m=d,p=(a("e29f"),a("2877")),f=Object(p["a"])(m,i,n,!1,null,"182e2bf4",null);e["default"]=f.exports},"5e31":function(t,e,a){},"8edd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("j-modal",{attrs:{title:t.title,width:t.width,visible:t.visible,maskClosable:!1,switchFullscreen:"",okButtonProps:{class:{"jee-hidden":t.disableSubmit}},cancelText:"关闭"},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("equipment-table-form",{ref:"realForm",attrs:{disabled:t.disableSubmit},on:{ok:t.submitCallback}})],1)},n=[],r=a("ea93"),l={name:"EquipmentTableModal",components:{EquipmentTableForm:r["default"]},data:function(){return{title:"",width:800,visible:!1,disableSubmit:!1}},methods:{add:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs.realForm.add()}))},edit:function(t){var e=this;this.visible=!0,this.$nextTick((function(){e.$refs.realForm.edit(t)}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){this.$refs.realForm.submitForm()},submitCallback:function(){this.$emit("ok"),this.visible=!1},handleCancel:function(){this.close()}}},o=l,s=a("2877"),c=Object(s["a"])(o,i,n,!1,null,null,null);e["default"]=c.exports},9872:function(t,e,a){},bb1b:function(t,e,a){},d42b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"euqipment-chart-left",staticStyle:{height:"160px","margin-bottom":"20px"}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("v-chart",{staticClass:"chart",attrs:{forceFit:!0,height:t.height,data:t.data,scale:t.scale}},[a("v-tooltip",{attrs:{showTitle:!1,dataKey:"item*percent"}}),a("v-axis"),a("v-pie",{attrs:{position:"percent",color:"item",vStyle:t.pieStyle,label:t.labelConfig}}),a("v-coord",{attrs:{type:"theta",radius:.75,innerRadius:.6}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-row",{staticClass:"data"},[a("a-col",{attrs:{span:8}},[a("h1",[t._v("设备总数 "),a("br"),t._v(" "+t._s(this.totalNum))])]),a("a-col",{attrs:{span:16}},[a("ul",[a("li",{staticClass:"data-on"},[t._v("在线 "+t._s(this.data[0].count))]),a("li",{staticClass:"data-up"},[t._v("离线　"+t._s(this.data[1].count))]),a("li",{staticClass:"data-no"},[t._v("未注册　"+t._s(this.data[2].count))])])])],1)],1)],1)],1)},n=[],r=(a("0fea"),a("b775")),l=a("7104"),o=[{item:"在线",count:1},{item:"离线",count:1},{item:"未注册",count:1}],s=[{dataKey:"percent",min:0,formatter:".0%"}],c=(new l.View).source(o);c.transform({type:"percent",field:"count",dimension:"item",as:"percent"});var u=c.rows,d={name:"EquipmentChart",data:function(){return{totalNum:"",data:u,scale:s,height:250,pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{formatter:function(t,e){return e.point.item+": "+t}}]}},created:function(){var t=this;r["b"].get(window._CONFIG["domianURL"]+"/equipment/equipmentTable/selectEquipmentNumber").then((function(e){var a=[{item:"在线",count:1},{item:"离线",count:1},{item:"未注册",count:1}];a[0].count=e.result.onLineNum,a[1].count=e.result.offLineNum,a[2].count=e.result.unregisteredNum,t.totalNum=e.result.totalNum;var i=(new l.View).source(a);i.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),t.data=i.rows}))},components:{}},m=d,p=(a("3d2d"),a("2877")),f=Object(p["a"])(m,i,n,!1,null,"5db2902d",null);e["default"]=f.exports},df98:function(t,e,a){"use strict";var i=a("9872"),n=a.n(i);n.a},e29f:function(t,e,a){"use strict";var i=a("5e31"),n=a.n(i);n.a},fac1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticStyle:{height:"160px",width:"100%"}},[a("equipment-chart"),a("equipment-chart-right")],1),a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchQuery(e)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"序列号"}},[a("a-input",{attrs:{placeholder:"请输入序列号"},model:{value:t.queryParam.serialNumber,callback:function(e){t.$set(t.queryParam,"serialNumber",e)},expression:"queryParam.serialNumber"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"设备名称"}},[a("a-input",{attrs:{placeholder:"请输入设备名称"},model:{value:t.queryParam.equipmentName,callback:function(e){t.$set(t.queryParam,"equipmentName",e)},expression:"queryParam.equipmentName"}})],1)],1),t.toggleSearchStatus?[a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"设备类型"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择设备类型",dictCode:"ufpp_equipment_type where pid = 0,type_name,id"},model:{value:t.queryParam.equipmentType,callback:function(e){t.$set(t.queryParam,"equipmentType",e)},expression:"queryParam.equipmentType"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"所属区域"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择所属区域",dictCode:"ufpp_monitor_area,area_name,id"},model:{value:t.queryParam.region,callback:function(e){t.$set(t.queryParam,"region",e)},expression:"queryParam.region"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"通讯类型"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择通讯类型",dictCode:"communication_type"},model:{value:t.queryParam.communicationType,callback:function(e){t.$set(t.queryParam,"communicationType",e)},expression:"queryParam.communicationType"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"设备状态"}},[a("j-dict-select-tag",{attrs:{placeholder:"请选择设备状态",dictCode:"equipment_state"},model:{value:t.queryParam.equipmentState,callback:function(e){t.$set(t.queryParam,"equipmentState",e)},expression:"queryParam.equipmentState"}})],1)],1),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("a-form-item",{attrs:{label:"创建时间"}},[a("j-date",{attrs:{placeholder:"请选择创建时间"},model:{value:t.queryParam.createTime,callback:function(e){t.$set(t.queryParam,"createTime",e)},expression:"queryParam.createTime"}})],1)],1)]:t._e(),a("a-col",{attrs:{xl:6,lg:7,md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.searchQuery}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:t.searchReset}},[t._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:t.handleToggleSearch}},[t._v("\n              "+t._s(t.toggleSearchStatus?"收起":"展开")+"\n              "),a("a-icon",{attrs:{type:t.toggleSearchStatus?"up":"down"}})],1)],1)])],2)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("新增")]),a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:function(e){return t.handleExportXls("设备表")}}},[t._v("导出")]),a("a-upload",{attrs:{name:"file",showUploadList:!1,multiple:!1,headers:t.tokenHeader,action:t.importExcelUrl},on:{change:t.handleImportExcel}},[a("a-button",{attrs:{type:"primary",icon:"import"}},[t._v("导入")])],1),a("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:t.batchDel}},[t._v("批量删除")])],1),a("div",[a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",scroll:{x:!0},width:"auto",bordered:"",rowKey:"id",columns:t.columns,dataSource:t.dataSource,pagination:t.ipagination,loading:t.loading,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"htmlSlot",fn:function(e){return[a("div",{domProps:{innerHTML:t._s(e)}})]}},{key:"imgSlot",fn:function(e){return[e?a("img",{staticStyle:{"max-width":"80px","font-size":"12px","font-style":"italic"},attrs:{src:t.getImgView(e),height:"25px",alt:""}}):a("span",{staticStyle:{"font-size":"12px","font-style":"italic"}},[t._v("无图片")])]}},{key:"fileSlot",fn:function(e){return[e?a("a-button",{attrs:{ghost:!0,type:"primary",icon:"download",size:"small"},on:{click:function(a){return t.downloadFile(e)}}},[t._v("\n            下载\n          ")]):a("span",{staticStyle:{"font-size":"12px","font-style":"italic"}},[t._v("无文件")])]}},{key:"action",fn:function(e,i){return a("span",{},[a("a-button",{attrs:{type:"link",ghost:"",disabled:0==i.thresholdStatus},on:{click:function(e){return t.toConfigure(i)}}},[a("a-icon",{attrs:{type:"setting"}})],1),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.handleEdit(i)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.handleDetail(i)}}},[t._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return t.handleDelete(i.id)}}},[a("a",[t._v("删除")])])],1)}}])})],1),a("equipment-table-modal",{ref:"modalForm",on:{ok:t.modalFormOk}}),a("ToConfigureModal",{ref:"toConfigureModal",on:{ok:t.modalFormOk}})],1)],1)},n=[],r=a("ac0d"),l=a("b65a"),o=a("8edd"),s=a("1798"),c=a("d42b"),u=a("89f2"),d=a("5914"),m={name:"EquipmentTableList",mixins:[l["a"],r["b"]],components:{EquipmentTableModal:o["default"],ToConfigureModal:s["default"],EquipmentChart:c["default"],EquipmentChartRight:d["default"],filterMultiDictText:u["c"]},data:function(){return{description:"设备表管理页面",columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(t,e,a){return parseInt(a)+1}},{title:"所属单位",align:"center",dataIndex:"affiliatedAgent_dictText"},{title:"序列号",align:"center",dataIndex:"serialNumber"},{title:"设备名称",align:"center",dataIndex:"equipmentName"},{title:"设备类型",align:"center",dataIndex:"equipmentType_dictText"},{title:"所属区域",align:"center",dataIndex:"region_dictText"},{title:"设备型号",align:"center",dataIndex:"equipmentModel_dictText"},{title:"通讯类型",align:"center",dataIndex:"communicationType_dictText"},{title:"所属厂商",align:"center",dataIndex:"manufacturer_dictText"},{title:"设备状态",align:"center",dataIndex:"equipmentState_dictText"},{title:"故障状态",align:"center",dataIndex:"faultState_dictText"},{title:"连接状态",align:"center",dataIndex:"connectionStatus_dictText"},{title:"阈值下发状态",align:"center",dataIndex:"thresholdStatus_dictText"},{title:"详细位置",align:"center",dataIndex:"detailedLocation"},{title:"联系人电话",align:"center",dataIndex:"telephone"},{title:"创建时间",align:"center",dataIndex:"createTime",customRender:function(t){return t?t.length>10?t.substr(0,10):t:""}},{title:"操作",dataIndex:"action",align:"center",fixed:"right",width:170,scopedSlots:{customRender:"action"}}],url:{list:"/equipment/equipmentTable/list",delete:"/equipment/equipmentTable/delete",deleteBatch:"/equipment/equipmentTable/deleteBatch",exportXlsUrl:"/equipment/equipmentTable/exportXls",importExcelUrl:"equipment/equipmentTable/importExcel",selectEquipmentNumber:"equipment/equipmentTable/selectEquipmentNumber"},dictOptions:{},superFieldList:[]}},created:function(){this.$set(this.dictOptions,"isRemotePowerOff",[{text:"是",value:"Y"},{text:"否",value:"N"}]),this.getSuperFieldList()},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},methods:{toConfigure:function(t){this.$refs.toConfigureModal.edit(t),this.$refs.toConfigureModal.title="通道配置",this.$refs.toConfigureModal.disableSubmit=!1},initDictConfig:function(){},getSuperFieldList:function(){var t=[];t.push({type:"string",value:"affiliatedAgent",text:"所属单位",dictCode:"sys_depart,depart_name,id"}),t.push({type:"string",value:"systemBelong",text:"设备所属系统",dictCode:"ufpp_sys_type,sys_name,id"}),t.push({type:"string",value:"serialNumber",text:"序列号",dictCode:""}),t.push({type:"string",value:"equipmentName",text:"设备名称",dictCode:""}),t.push({type:"string",value:"equipmentType",text:"设备类型",dictCode:"ufpp_equipment_type,type_name,id"}),t.push({type:"string",value:"region",text:"所属区域",dictCode:"ufpp_monitor_area,area_name,id"}),t.push({type:"string",value:"equipmentModel",text:"设备型号",dictCode:"ufpp_equipment_type,type_name,id"}),t.push({type:"int",value:"floor",text:"楼层",dictCode:""}),t.push({type:"string",value:"communicationType",text:"通讯类型",dictCode:"communication_type"}),t.push({type:"string",value:"aepModel",text:"AEP模型",dictCode:"specific_aep_model"}),t.push({type:"string",value:"manufacturer",text:"所属厂商",dictCode:"belong_manufacturer"}),t.push({type:"int",value:"equipmentState",text:"设备状态",dictCode:"equipment_state"}),t.push({type:"int",value:"faultState",text:"故障状态",dictCode:"fault_state"}),t.push({type:"int",value:"connectionStatus",text:"连接状态",dictCode:"connect_state"}),t.push({type:"int",value:"thresholdStatus",text:"阈值下发状态",dictCode:"threshold_status"}),t.push({type:"string",value:"verificationCode",text:"验证码",dictCode:""}),t.push({type:"string",value:"detailedLocation",text:"详细位置",dictCode:""}),t.push({type:"string",value:"name",text:"联系人姓名",dictCode:""}),t.push({type:"string",value:"telephone",text:"联系人电话",dictCode:""}),t.push({type:"string",value:"notificationType",text:"短信或电话通知",dictCode:"notification_type"}),t.push({type:"string",value:"protocol",text:"所属协议",dictCode:""}),t.push({type:"date",value:"equipmentProductionTime",text:"设备生产时间"}),t.push({type:"date",value:"equipmentExpireTime",text:"设备到期时间"}),t.push({type:"string",value:"mappingAddress",text:"部件映射地址",dictCode:""}),t.push({type:"string",value:"edgeService",text:"边缘服务",dictCode:""}),t.push({type:"switch",value:"isRemotePowerOff",text:"远程断电"}),t.push({type:"date",value:"createTime",text:"创建时间"}),this.superFieldList=t}}},p=m,f=(a("df98"),a("2877")),h=Object(f["a"])(p,i,n,!1,null,"2c4fcfe9",null);e["default"]=h.exports}}]);